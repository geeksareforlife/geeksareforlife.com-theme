{{ define "main" }}
{{ $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
<section><!-- this will be the h-feed container -->
  {{ partial "h-card.html" . }}

  <div class="mt-12 grid gap-5 lg:grid-cols-3 lg:max-w-none">
    {{ range first 3 $pages }}
    <article class="flex flex-col rounded-lg shadow-lg overflow-hidden">
      <div class="flex-shrink-0">
        <img class="h-32 w-full object-cover" src="{{ .Params.Hero }}" alt="" />
      </div>
      <div class="flex-1 bg-white p-6 flex flex-col justify-between">
        <div class="flex-1">
          <a href="{{ .RelPermalink }}" class="block">
            <h2 class="mt-2 leading-7 mb-2">
              {{ .Title }}
            </h2>
          </a>
          <div class="text-sm leading-5 text-gray-500">
            <time datetime="{{ .Date.Format "2006-01-02" }}">
              {{ .Date.Format "January" }}
              {{ .Date.Format "2" | humanize}},
              {{ .Date.Format "2006" }}
            </time>
            <span class="mx-1">
              &middot;
            </span>
            <span>
              {{ .ReadingTime }} min read
            </span>
          </div>
          <p class="mt-3 leading-6 hover:no-underline">
            {{ .Summary }}
          </p>
        </div>
        
        {{ with .Params.tags }}
        <ul id="tags" class="mt-6">
        {{ range . }}
          {{ partial "tag.html" . }}
        {{ end }}
        </ul>
        {{ end }}
      </div>
    </article>
    {{- end }}
  </div>

  <div class="mt-16 lg:flex">

    <div class="flex-1">
      {{ range after 3 $pages }}
        {{ partial "basic-post.html" . }}
      {{ end }}
    </div>

    <div class="hidden lg:block lg:max-w-1/4 lg:flex-none p">
      <a href="/tags/"><h3>Tags</h3></a>
      <ul>
      {{ range .Site.Taxonomies.tags.ByCount }}
        <li><a href="/tags/{{ .Name | urlize  }}">{{ .Name | humanize }}</a> ({{ .Count }})</li>
      {{ end }}
      </ul>
    </div>


</section>

{{ end }}